---
import { getCollection, type CollectionEntry } from "astro:content";

// generate path
export async function getStaticPaths() {
  const blogEntries = await getCollection("blogs");
  return blogEntries.map((entry: CollectionEntry<"blogs">) => ({
    params: { slug: entry.slug },
    props: { entry },
  }));
}

const { entry }: { entry: CollectionEntry<"blogs"> } = Astro.props;
const { Content } = await entry.render();
const date = entry.data.pubDate.toISOString().slice(0, 10);

import Layout from "../../layouts/Layout.astro";
import Navbar from "../../components/Navbar.astro";
import Footer from "../../components/Footer.astro";
---

<Layout title="My blog posts - Barra Ihsan">
  <Navbar />
  <main class="px-5 mt:px-12 mt-32 md:mt-60">
    <article class="prose mx-auto prose-invert md:prose-lg lg:prose-xl">
      <header>
        <em>Published <time datetime={date}>{date}</time></em>
        <h1>{entry.data.title}</h1>
      </header>
      <section>
        <Content />
      </section>
    </article>
  </main>
  <Footer />
</Layout>
